const express = require('express');

const app = express();

const port = 3000;


// 2. [à¹à¸à¹‰à¹„à¸‚à¸Šà¹ˆà¸­à¸‡à¹‚à¸«à¸§à¹ˆ Security] à¸¥à¸šà¸Ÿà¸±à¸‡à¸à¹Œà¸Šà¸±à¸™ 'eval()' à¸—à¸µà¹ˆà¸­à¸±à¸™à¸•à¸£à¸²à¸¢
// ** à¸«à¸¡à¸²à¸¢à¹€à¸«à¸•à¸¸: à¹‚à¸„à¹‰à¸”à¸™à¸µà¹‰à¸›à¸¥à¸­à¸”à¸ à¸±à¸¢à¹à¸¥à¹‰à¸§ **
app.get('/safe-api', (req, res) => {
  res.send('Hello DevSecOps World!!');
});


app.get('/', (req, res) => {
  res.send('Hello DevSecOps World!!');
});


// *** à¸ªà¸³à¸„à¸±à¸: à¸šà¸£à¸£à¸—à¸±à¸”à¸™à¸µà¹‰à¸ˆà¸°à¸­à¸™à¸¸à¸à¸²à¸•à¹ƒà¸«à¹‰à¸£à¸±à¸™ app.listen() à¹€à¸¡à¸·à¹ˆà¸­à¸£à¸±à¸™à¹„à¸Ÿà¸¥à¹Œà¸™à¸µà¹‰à¹‚à¸”à¸¢à¸•à¸£à¸‡à¹€à¸—à¹ˆà¸²à¸™à¸±à¹‰à¸™ ***
// *** à¹à¸•à¹ˆà¹€à¸¡à¸·à¹ˆà¸­à¸£à¸±à¸™ Unit Test à¸ˆà¸°à¹„à¸¡à¹ˆà¸£à¸±à¸™ app.listen() ***
/* istanbul ignore start */ // ğŸ‘ˆ à¹€à¸£à¸´à¹ˆà¸¡à¸¢à¸à¹€à¸§à¹‰à¸™à¸šà¸¥à¹‡à¸­à¸à¹‚à¸„à¹‰à¸”à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸” (à¸£à¸§à¸¡ 7 à¸šà¸£à¸£à¸—à¸±à¸”à¸—à¸µà¹ˆà¸–à¸¹à¸à¸™à¸±à¸š)
if (require.main === module) {
  app.listen(port, () => {
    console.log(`App listening at http://localhost:${port}`);
  });
}
/* istanbul ignore end */ // ğŸ‘ˆ à¸ªà¸´à¹‰à¸™à¸ªà¸¸à¸”à¸à¸²à¸£à¸¢à¸à¹€à¸§à¹‰à¸™à¸šà¸¥à¹‡à¸­à¸à¹‚à¸„à¹‰à¸”

// *** Export 'app' instance à¹€à¸à¸·à¹ˆà¸­à¹ƒà¸«à¹‰ Unit Test à¸ªà¸²à¸¡à¸²à¸£à¸– Import à¹„à¸›à¹ƒà¸Šà¹‰à¹„à¸”à¹‰ (Supertest) ***
module.exports = app;